### Floyd

> é€‚ç”¨äºä»»ä½•å›¾ï¼Œä¸ç®¡æœ‰å‘æ— å‘ï¼Œè¾¹æƒæ­£è´Ÿï¼Œä½†æ˜¯æœ€çŸ­è·¯å¿…é¡»å­˜åœ¨ã€‚ï¼ˆä¸èƒ½æœ‰ä¸ªè´Ÿç¯ï¼‰

> 1. æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ•°ç»„ `f[k][x][y]`ï¼Œè¡¨ç¤ºåªå…è®¸ç»è¿‡ç»“ç‚¹ 1![1](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) åˆ° ğ‘˜![k](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å­å›¾ ğ‘‰â€² =1,2,â€¦,ğ‘˜![V'={1, 2, \ldots, k}](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) ä¸­çš„è·¯å¾„ï¼Œæ³¨æ„ï¼Œğ‘¥![x](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) ä¸ ğ‘¦![y](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) ä¸ä¸€å®šåœ¨è¿™ä¸ªå­å›¾ä¸­ï¼‰ï¼Œç»“ç‚¹ ğ‘¥![x](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) åˆ°ç»“ç‚¹ ğ‘¦![y](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) çš„æœ€çŸ­è·¯é•¿åº¦ã€‚`f[n][x][y]` å°±æ˜¯ç»“ç‚¹ ğ‘¥![x](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) åˆ°ç»“ç‚¹ ğ‘¦![y](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) çš„æœ€çŸ­è·¯é•¿åº¦ã€‚

```python
for k in range(1, n + 1):
    for x in range(1, n + 1):
        for y in range(1, n + 1):
            f[x][y] = min(f[x][y], f[x][k] + f[k][y])
```

```python
#ä¾‹é¢˜ï¼šhttps://www.luogu.com.cn/problem/P2910
def solve():
    n,m = map(int ,input().split())
    a = []
    edges = []
    for _ in range(m):
        x = int(input())
        a.append(x)
    f = [[[0] for _ in range(n + 1)]for i in range(n + 1)]
    for i in range(1,n + 1):
        b = [0] + list(map(int,input().split()))
        for _ in range(1,n + 1):
            f[i][_] = b[_]
    for k in range(1,n + 1):
        for x in range(1,n + 1):
            for y in range(1,n + 1):
                f[x][y] = min(f[x][y] , f[x][k] + f[k][y])
    ans = 0
    for i in range(len(a) - 1):
        x = a[i]
        y = a[i + 1]
        ans += f[x][y]
    print(ans)

if __name__ == '__main__':
    solve()
```

